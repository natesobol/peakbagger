<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Peakbagger‚Äôs Journal ‚Äì Track the NH 48 and other 4K peaks</title>
<meta name="author" content="Nathan Sobol" />

<!-- Favicon -->
<link rel="icon" type="image/png" href="https://static.wixstatic.com/media/66b1b2_6dfce097ed584b5296afeb83f26e4c8a~mv2.png">
<link rel="apple-touch-icon" href="https://static.wixstatic.com/media/66b1b2_6dfce097ed584b5296afeb83f26e4c8a~mv2.png">

<!-- SEO -->
<meta name="description" content="A free, offline-friendly web app for hikers to log ascents of New Hampshire 4000 footers, 52 With a View and other peak lists. Search, sort, filter and export your progress." />
<meta name="keywords" content="NH 48 peak list, White Mountain 4000 footers, peakbagging app, hiking log, New England 4000 footers, 52 with a View, hiking progress, peak tracking, summit log, Appalachian Mountains, White Mountain hiking app" />
<link rel="canonical" href="https://nh48.app/" />
<link rel="alternate" hreflang="en" href="https://nh48.app/" />
<meta name="robots" content="index,follow,max-image-preview:large" />

<!-- Open Graph -->
<meta property="og:type" content="website" />
<meta property="og:url" content="https://nh48.app/" />
<meta property="og:title" content="Peakbagger‚Äôs Journal ‚Äì Track your NH 48 progress" />
<meta property="og:description" content="Log your hikes of the NH 48, 52 With a View and other peak lists. Free, offline and community-driven." />
<meta property="og:image" content="https://nh48.app/images/peakbagger-preview.png" />
<meta property="og:image:width" content="1200" />
<meta property="og:image:height" content="630" />
<meta property="og:image:alt" content="Peakbagger's Journal app showing NH 48 mountain cards with photos, elevations, and completion tracking" />
<meta property="og:site_name" content="Peakbagger's Journal" />
<meta property="og:locale" content="en_US" />

<!-- Twitter -->
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="Peakbagger's Journal ‚Äì Track your NH 48 progress" />
<meta name="twitter:description" content="Log your hikes of the NH 48, 52 With a View and other peak lists. Free, offline and community-driven." />
<meta name="twitter:image" content="https://nh48.app/images/peakbagger-preview.png" />
<meta name="twitter:site" content="@nh48app" />
<meta name="twitter:creator" content="@nh48app" />

<!-- JSON-LD: SoftwareApplication -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebApplication",
  "name": "Peakbagger‚Äôs Journal",
  "operatingSystem": "Web",
  "applicationCategory": "SportsApplication",
  "description": "Free hiking log for tracking New Hampshire‚Äôs 4000 footers, 52 With a View and other peak lists. Search, sort, filter and record your climbs and dates.",
  "offers": {
    "@type": "Offer",
    "price": "0",
    "priceCurrency": "USD"
  },
  "url": "https://nh48.app/",
  "image": "https://nh48.app/images/peakbagger-preview.png",
  "publisher": {
    "@type": "Person",
    "name": "Nathan Sobol",
    "url": "https://www.nh48pics.com/"
  }
}
</script>

<!-- JSON-LD: WebSite & Organization -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebSite",
  "name": "Peakbagger's Journal",
  "url": "https://nh48.app/",
  "alternateName": "NH48.app",
  "publisher": {
    "@type": "Organization",
    "name": "Peakbagger",
    "url": "https://nh48.app/",
    "logo": {
      "@type": "ImageObject",
      "url": "https://nh48.app/images/peakbagger-preview.png",
      "width": 1200,
      "height": 630
    },
    "sameAs": [
      "https://nh48pics.com",
      "https://nh48.info"
    ]
  },
  "potentialAction": {
    "@type": "SearchAction",
    "target": "https://nh48.app/pages/peakbagger-clean.html?search={search_term_string}",
    "query-input": "required name=search_term_string"
  }
}
</script>

<!-- External stylesheet -->
<link rel="stylesheet" href="../css/styles.css">
<style>
/* Site Navigation Header */
.site-nav {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 24px;
  background: linear-gradient(180deg, #1a1a2e 0%, #16162a 100%);
  border-bottom: 1px solid rgba(255,255,255,0.1);
  position: sticky;
  top: 0;
  z-index: 100;
}
.site-nav-logo {
  display: flex;
  align-items: center;
  gap: 10px;
  text-decoration: none;
  color: #fff;
}
.site-nav-logo img {
  width: 40px;
  height: 40px;
  border-radius: 8px;
  border: 1px solid rgba(255,255,255,0.2);
}
.site-nav-logo span {
  font-weight: 800;
  font-size: 38px;
  line-height: 1;
  color: #fff;
  text-transform: uppercase;
  letter-spacing: 1px;
}
.site-nav-links {
  display: flex;
  align-items: center;
  gap: 8px;
}
.site-nav-links a {
  color: #a5b4c3;
  text-decoration: none;
  padding: 8px 16px;
  border-radius: 6px;
  font-size: 15px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.8px;
  transition: all 0.2s ease;
}
.site-nav-links a:hover {
  color: #fff;
  background: rgba(255,255,255,0.1);
}
.site-nav-links a.active {
  color: #22c55e;
  background: rgba(34,197,94,0.1);
}
.site-nav-auth {
  display: flex;
  align-items: center;
}
.site-nav-auth .btn-small {
  padding: 6px 14px;
  font-size: 13px;
  border-radius: 6px;
}
.site-nav-avatar {
  display: flex;
  align-items: center;
}
@media (max-width: 768px) {
  .site-nav {
    padding: 10px 12px;
  }
  .site-nav-logo span {
    display: none;
  }
  .site-nav-links {
    gap: 4px;
  }
  .site-nav-links a {
    padding: 6px 10px;
    font-size: 12px;
  }
}
@media (max-width: 480px) {
  .site-nav-links a {
    padding: 6px 8px;
    font-size: 11px;
  }
}
</style>
</head>
<body>

<!-- Site Navigation -->
<nav class="site-nav">
  <a href="/" class="site-nav-logo">
    <img src="https://static.wixstatic.com/media/66b1b2_6dfce097ed584b5296afeb83f26e4c8a~mv2.png" alt="Peakbagger Logo" />
    <span>Peakbagger</span>
  </a>
  <div class="site-nav-links">
    <a href="https://nh48.info" target="_blank" rel="noopener">NH48 API</a>
    <a href="https://nh48.info/pages/trails_app.html" target="_blank" rel="noopener">WMNF Trails</a>
    <a href="https://nh48pics.com" target="_blank" rel="noopener">NH48 Pics</a>
    <div class="site-nav-auth" id="navAuthCard">
      <div id="navAuthSignedOut">
        <button class="btn btn-primary btn-small" id="openAuthNav" style="background:#22c55e;border-color:#22c55e;color:#fff">Log in</button>
      </div>
      <div id="navAuthSignedIn" style="display:none">
        <a href="/profile" class="site-nav-avatar" title="View profile">
          <div id="navUserAvatarIcon" style="width:32px;height:32px;border-radius:50%;background:linear-gradient(135deg,#22c55e,#6b8cff);display:flex;align-items:center;justify-content:center;font-size:12px;color:white;font-weight:600;border:2px solid rgba(255,255,255,0.3)">
            <span id="navUserInitials">U</span>
          </div>
        </a>
      </div>
    </div>
  </div>
</nav>

<div class="app">
  <div class="topbar">
    <div class="row1">
      <div class="progress-wrap">
        <div class="progress-head">
          <!-- NEW: centered list title -->
          <div id="listTitle" class="list-title">‚Äî</div>

          <span id="progressText" class="subtle">0/0 ‚Ä¢ 0%</span>
        </div>
        <div class="progress" aria-label="progress"><div class="bar" id="bar"></div></div>
      </div>
      <div class="controls-container">
        <div class="controls">
          <div class="ctrl"><span class="ico">üîç</span><input id="search" type="search" placeholder="Search peaks‚Ä¶" data-i18n-placeholder="Search peaks..." /></div>
          <div class="ctrl-btn" id="sortBtn" title="Toggle sort"><span class="ico">‚ÜïÔ∏è</span> <span><span data-i18n="Sort">Sort:</span> <strong id="sortLabel">Rank</strong></span></div>
          <div class="ctrl-btn" id="showComplete"><span class="ico">‚úÖ</span> <span data-i18n="Completed: Showing">Completed: Showing</span></div>
          <!-- Advanced Filters (collapsible) -->
          <details class="ctrl-advanced-filters" style="position:relative">
            <summary class="ctrl-btn" style="cursor:pointer" title="Advanced filters">
              <span class="ico">‚è¨</span>
              <span data-i18n="Filters">Filters</span>
            </summary>
            <div class="advanced-filters-panel">
              <div class="filter-row">
                <label data-i18n="Status">Status:</label>
                <select id="statusFilter" class="select">
                  <option value="all" data-i18n-option="All Peaks">All Peaks</option>
                  <option value="completed" data-i18n-option="Completed">Completed</option>
                  <option value="favorites" data-i18n-option="Favorites">Favorites</option>
                  <option value="wishlist" data-i18n-option="Wishlist">Wishlist</option>
                  <option value="incomplete" data-i18n-option="Incomplete">Incomplete</option>
                </select>
              </div>
              <div class="filter-row">
                <label data-i18n="Range">Range:</label>
                <select id="rangeFilter" class="select">
                  <option value="all">All Ranges</option>
                  <option value="Presidential">Presidential</option>
                  <option value="Franconia">Franconia</option>
                  <option value="Carter-Moriah">Carter-Moriah</option>
                  <option value="Twin">Twin</option>
                  <option value="Bond">Bond</option>
                  <option value="Sandwich">Sandwich</option>
                  <option value="Kinsman">Kinsman</option>
                </select>
              </div>
              <div class="filter-row">
                <label>Min Elevation (ft):</label>
                <input type="number" id="elevationMin" class="filter-input" placeholder="4000" min="0" max="10000">
              </div>
              <div class="filter-row">
                <label>Max Elevation (ft):</label>
                <input type="number" id="elevationMax" class="filter-input" placeholder="6288" min="0" max="10000">
              </div>
              <button id="clearFilters" class="btn btn-ghost btn-small" style="width:100%;margin-top:8px" data-i18n="Clear All Filters">Clear All Filters</button>
            </div>
          </details>
          <!-- NEW: Mode toggle (Checklist / Grid) -->
          <div class="ctrl-btn" id="modeBtn" title="Switch between checklist and grid"><span class="ico">üóÇÔ∏è</span> <span><span data-i18n="Mode">Mode:</span> <strong id="modeLabel">Checklist</strong></span></div>
          <div id="unitToggle" class="ctrl-btn" title="Toggle units"><span class="ico">üìè</span><span id="unitLabel">Units: Feet</span></div>
          <div class="ctrl-btn" id="exportBtn"><span class="ico">üì§</span> <span data-i18n="Export XLSX">Export XLSX</span></div>
        </div>
      </div>
    </div>
  </div>

  <div class="content">
    <aside class="sidebar">
      <div class="auth desktop-only" id="authCard">
        <div id="authSignedOut">
          <div class="row">
            <div>
              <div class="subtle">You're not signed in</div>
              <div style="font-size:13px;color:var(--ink)">Sign in to save your progress</div>
            </div>
            <button class="btn btn-primary btn-small" id="openAuth" style="background:#22c55e;border-color:#22c55e;color:#fff">Log in</button>
          </div>
        </div>
        <div id="authSignedIn" style="display:none">
          <a href="/profile" id="userProfileLink" style="text-decoration:none;color:inherit;display:block;cursor:pointer;transition:background 0.2s;border-radius:8px;padding:8px;margin:-8px" title="View profile settings">
            <div class="row" style="align-items:center;gap:12px">
              <div id="userAvatarIcon" style="width:48px;height:48px;border-radius:50%;background:linear-gradient(135deg,var(--accent),#6b8cff);display:flex;align-items:center;justify-content:center;font-size:18px;color:white;font-weight:600;border:2px solid var(--border);flex-shrink:0">
                <span id="userInitials">U</span>
              </div>
              <div style="flex:1;min-width:0">
                <div id="meName" style="font-weight:600;margin-top:2px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap"></div>
                <div id="meEmail" class="subtle" style="font-size:12px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap"></div>
              </div>
              <div style="color:var(--ink-weak);font-size:20px;flex-shrink:0">‚Ä∫</div>
            </div>
          </a>
          <div id="miniPulseCard" class="mini-pulse-card" style="display:none">
            <a href="/profile" class="mini-pulse-link" title="View your profile activity pulse">
              <div class="mini-pulse-header">
                <div class="mini-pulse-title">
                  <span class="mini-pulse-icon">üìà</span>
                  <span>Hiking Pulse</span>
                </div>
                <span class="mini-pulse-cta">Profile ‚Ä∫</span>
              </div>
              <div class="mini-pulse-graph" id="miniPulseGraph" aria-label="Recent hiking activity preview"></div>
              <div class="mini-pulse-meta" id="miniPulseMeta">Log hikes to see your activity pulse</div>
            </a>
          </div>
        </div>
      </div>

      <!-- About Peakbagger Info Panel -->
      <details class="collapsible-section" id="introPanelDetails">
        <summary>
          <div class="summary-title">
            <span class="summary-icon">‚ÑπÔ∏è</span>
            <span data-i18n="About Peakbagger">About Peakbagger</span>
          </div>
          <span class="summary-chevron" aria-hidden="true"></span>
        </summary>
        <div class="panel" style="font-size:14px;line-height:1.5;color:var(--ink)">
          <p>Peakbagger is a tool to track your summits of peaks in the White Mountains. Use it to log your ascents, track your progress through peak lists, and discover which peaks you've conquered.</p>
          <p style="margin-top:10px">Whether you're working toward the NH 48, the 52 with a View, or other peak bagging challenges, Peakbagger helps you stay organized and motivated on your peak-hunting adventures.</p>
        </div>
      </details>

      <div style="margin-top:14px">
        <label for="listSelect" class="subtle" style="font-size:14px" data-i18n="Choose List">Choose List:</label>
        <select id="listSelect" class="select" style="width:100%;margin-top:6px"></select>
      </div>

      <!-- iOS App Promo - Between Choose List and Settings on mobile -->
      <a class="app-promo" href="https://apps.apple.com/us/app/peakbaggers-journal/idXXXXXXXXX" target="_blank" rel="noopener">
        <img class="app-promo__icon" src="https://static.wixstatic.com/media/66b1b2_6dfce097ed584b5296afeb83f26e4c8a~mv2.png" alt="Peakbagger's Journal iOS icon" loading="lazy">
        <div class="app-promo__meta">
          <div class="app-promo__title">Peakbagger's Journal (iOS)</div>
          <div class="app-promo__sub">Available on the App Store</div>
        </div>
        <span class="btn btn-primary btn-small app-promo__cta" style="background:#22c55e;border-color:#22c55e">View</span>
      </a>

      <!-- Mobile Search -->
      <div id="mobileSidebarSearch" style="display:none">
        <label for="mobileSearch" class="subtle" style="font-size:14px" data-i18n="Search">Search:</label>
        <input id="mobileSearch" type="search" placeholder="Search peaks‚Ä¶" data-i18n-placeholder="Search peaks..." style="width:100%;margin-top:6px;padding:8px 12px;border:1px solid var(--border);border-radius:6px;background:var(--input-bg);color:var(--ink);font-size:14px;" />
      </div>

      <details id="settingsDetails" class="collapsible-section"><summary>
          <div class="summary-title">
            <span class="summary-icon">‚öôÔ∏è</span>
            <span data-i18n="Settings">Settings</span>
          </div>
          <span class="summary-chevron" aria-hidden="true"></span>
        </summary><div class="settings">
        <div class="row">
          <label data-i18n="Units: Meters">Units: meters</label>
          <label class="switch"><input id="metersToggle" type="checkbox"><span class="slider"></span></label>
        </div>

        <!-- Grid Tracking Mode -->
        <div class="row">
          <label data-i18n="Grid tracking (12 months/peak)">Grid tracking (12 months/peak)</label>
          <label class="switch"><input id="gridTrackingToggle" type="checkbox"><span class="slider"></span></label>
        </div>
        <!-- Language selector -->
        <div style="margin-top:16px;padding-top:12px;border-top:1px solid var(--border)">
          <div class="subtle" style="font-size:12px;margin-bottom:8px;text-transform:uppercase;letter-spacing:0.5px" data-i18n="Language">Language</div>
          <div class="language-selector">
            <button class="lang-btn active" data-lang="en" title="English"><img src="https://flagcdn.com/w20/us.png" srcset="https://flagcdn.com/w40/us.png 2x" width="20" height="15" alt="EN"></button>
            <button class="lang-btn" data-lang="es" title="Espa√±ol"><img src="https://flagcdn.com/w20/es.png" srcset="https://flagcdn.com/w40/es.png 2x" width="20" height="15" alt="ES"></button>
            <button class="lang-btn" data-lang="fr" title="Fran√ßais"><img src="https://flagcdn.com/w20/fr.png" srcset="https://flagcdn.com/w40/fr.png 2x" width="20" height="15" alt="FR"></button>
            <button class="lang-btn" data-lang="de" title="Deutsch"><img src="https://flagcdn.com/w20/de.png" srcset="https://flagcdn.com/w40/de.png 2x" width="20" height="15" alt="DE"></button>
            <button class="lang-btn" data-lang="zh" title="‰∏≠Êñá"><img src="https://flagcdn.com/w20/cn.png" srcset="https://flagcdn.com/w40/cn.png 2x" width="20" height="15" alt="ZH"></button>
            <button class="lang-btn" data-lang="ja" title="Êó•Êú¨Ë™û"><img src="https://flagcdn.com/w20/jp.png" srcset="https://flagcdn.com/w40/jp.png 2x" width="20" height="15" alt="JA"></button>
          </div>
        </div>
        <!-- Color Legend -->
        <div style="margin-top:16px;padding-top:12px;border-top:1px solid var(--border)">
          <div class="subtle" style="font-size:12px;margin-bottom:8px;text-transform:uppercase;letter-spacing:0.5px" data-i18n="Card Color Legend">Card Color Legend</div>
          <div style="display:flex;flex-direction:column;gap:6px;font-size:13px">
            <div style="display:flex;align-items:center;gap:8px">
              <div style="width:4px;height:16px;background:#3ddc84;border-radius:2px"></div>
              <span data-i18n="Completed">Completed</span>
            </div>
            <div style="display:flex;align-items:center;gap:8px">
              <div style="width:4px;height:16px;background:#d4af37;border-radius:2px"></div>
              <span data-i18n="Favorite">Favorite</span>
            </div>
            <div style="display:flex;align-items:center;gap:8px">
              <div style="width:4px;height:16px;background:#800000;border-radius:2px"></div>
              <span data-i18n="Wishlist">Wishlist</span>
            </div>
            <div style="display:flex;align-items:center;gap:8px">
              <div style="width:4px;height:16px;background:#646464;border-radius:2px"></div>
              <span data-i18n="Incomplete">Incomplete</span>
            </div>
          </div>
        </div>
      </div></details>

      <!-- Themes dropdown (pre-collapsed) -->
      <details id="themeDetails" class="collapsible-section"><summary>
          <div class="summary-title">
            <span class="summary-icon">üé®</span>
            <span data-i18n="Themes">Themes</span>
          </div>
          <span class="summary-chevron" aria-hidden="true"></span>
        </summary>
        <div class="panel" style="margin-top:8px">
          <label for="themeSelect" class="subtle" data-i18n="Choose theme">Choose theme</label>
          <select id="themeSelect" class="select" style="width:100%;margin-top:6px">
            <option value="dark" data-i18n-option="Dark (default)">Dark (default)</option>
            <option value="light" data-i18n-option="Light (white & black)">Light (white & black)</option>
            <option value="forest" data-i18n-option="Forest Green">Forest Green</option>
            <option value="sky" data-i18n-option="Sky Blue">Sky Blue</option>
          </select>
        </div>
      </details>

      <!-- NEW: Resources panel -->
      <details id="resourcesDetails" class="collapsible-section"><summary>
          <div class="summary-title">
            <span class="summary-icon">üåê</span>
            <span data-i18n="Resources">Resources</span>
          </div>
          <span class="summary-chevron" aria-hidden="true"></span>
        </summary><div class="panel" style="margin-top:14px">
        <div class="links-col">
          <a class="btn-link" href="https://trailsnh.com/" target="_blank" rel="noopener">TrailsNH (trip reports)</a>
          <a class="btn-link" href="https://www.weather.gov/" target="_blank" rel="noopener">NOAA Weather</a>
          <a class="btn-link" href="https://www.peakbagger.com/" target="_blank" rel="noopener">Peakbagger (lists & facts)</a>
          <a class="btn-link" href="https://www.mountwashington.org/" target="_blank" rel="noopener">Mount Washington Observatory</a>
          <a class="btn-link" href="https://www.fs.usda.gov/whitemountain" target="_blank" rel="noopener">WMNF Alerts/Notices</a>
        </div>
        <p class="subtle xsmall" style="margin-top:8px">External links open in a new tab.</p>
        </div></details>

      <!-- NEW: Copyright -->
      <div class="copyright">¬© <span id="copyrightYear"></span> Nathan Sobol</div>
    </aside>

    <main class="panel">
      <!-- Pagination header (Top) -->
      <div class="pager-wrap">
        <div class="pager-stats" id="pg-stats-top">Showing ‚Äî</div>
        <div class="page-list"  id="pg-list-top"  aria-label="Pagination (top)"></div>
      </div>

      <!-- Grid view (card layout) -->
      <div id="grid-view" class="grid-view"></div>

      <!-- List view (table format) -->
      <div id="list-view" class="list-view"></div>

      <!-- Full-page Peak Detail View -->
      <div id="peakDetailPage" class="peak-detail-page" style="display:none">
        <div class="peak-detail-header">
          <button id="peakDetailBackBtn" class="btn btn-ghost btn-small" style="margin-bottom:16px" data-i18n="‚Üê Back to Peakbagger">‚Üê Back to Peakbagger</button>
          <h1 id="peakDetailTitle" style="margin:0 0 8px 0">‚Äî</h1>
          <p id="peakDetailSub" class="subtle" style="margin:0" data-i18n="Quick facts, weather & helpful links.">Quick facts, weather & helpful links.</p>
        </div>

        <div id="peakDetailPhotos" class="peak-detail-photos">
          <div id="peakCarousel" class="peak-carousel"></div>
          <div id="peakDots" class="peak-carousel-dots"></div>
          <div class="peak-carousel-controls">
            <button id="peakPrevBtn" aria-label="Previous image">‚Äπ</button>
            <button id="peakNextBtn" aria-label="Next image">‚Ä∫</button>
          </div>
          <!-- Countdown timer overlay -->
          <div class="peak-carousel-timer" id="peakCarouselTimer" style="display:none">
            <svg viewBox="0 0 40 40">
              <circle id="peakTimerRing" class="peak-timer-ring" cx="20" cy="20" r="18"></circle>
            </svg>
            <span id="peakTimerText" class="peak-timer-text"></span>
          </div>
        </div>

        <!-- Desktop: side-by-side metadata panels -->
        <div class="peak-detail-grid">
          <!-- Fast facts -->
          <section class="fact">
            <h3 data-i18n="Fast facts">Fast facts</h3>
            <div class="kv"><span data-i18n="Elevation">Elevation</span><strong id="peakDetailElev">‚Äî</strong></div>
            <div class="kv"><span data-i18n="Date completed">Date completed</span><input type="date" id="peakDetailDateInput" class="date-input" value="" /></div>
            <div id="peakDetailMonthGrid" class="peak-detail-month-grid" style="margin-top:16px;display:none;">
              <h4 style="margin:0 0 10px 0;font-size:0.85rem;color:var(--ink-light);text-transform:uppercase;letter-spacing:0.5px;" data-i18n="Monthly Completions">Monthly Completions</h4>
              <div class="detail-month-grid"></div>
            </div>
            <div class="kv"><span data-i18n="Location">Location</span><strong id="peakDetailLocation">‚Äî</strong></div>
            <div class="kv"><span data-i18n="Prominence">Prominence</span><strong id="peakDetailProm">‚Äî</strong></div>
            <div class="kv"><span data-i18n="Difficulty">Difficulty</span><strong id="peakDetailDiff">‚Äî</strong></div>
            <div class="kv" style="border-top:2px solid var(--border);padding-top:12px;margin-top:8px;">
              <button id="peakDetailFavBtn" class="btn btn-secondary btn-small" style="flex:1">
                <span id="peakDetailFavIcon">‚≠ê</span> <span id="peakDetailFavText" data-i18n="Favorite">Favorite</span>
              </button>
              <button id="peakDetailWishBtn" class="btn btn-secondary btn-small" style="flex:1;margin-left:8px">
                <span id="peakDetailWishIcon">‚ù§Ô∏è</span> <span id="peakDetailWishText" data-i18n="Wishlist">Wishlist</span>
              </button>
            </div>
          </section>

          <!-- Weather -->
          <section class="fact">
            <h3 data-i18n="Weather">Weather</h3>
            <p class="subtle small" data-i18n="Forecast links open in a new tab. NOAA point forecasts work best near the summit.">Forecast links open in a new tab. NOAA point forecasts work best near the summit.</p>
            <div class="links-col">
              <a class="btn-link" id="peakWxNoaa" href="https://www.weather.gov/" target="_blank" rel="noopener">NOAA Point Forecast</a>
              <a class="btn-link" id="peakWxOpenMeteo" href="https://open-meteo.com/en/docs" target="_blank" rel="noopener">Open-Meteo (lat/lon)</a>
              <a class="btn-link" id="peakWxTrailsNH" href="https://trailsnh.com/" target="_blank" rel="noopener">TrailsNH Summit Forecast</a>
              <a class="btn-link" id="peakWxMWOBS" href="https://www.mountwashington.org/experience-the-weather/" target="_blank" rel="noopener">MWOBS (Presidentials)</a>
            </div>
          </section>

          <!-- Learn more -->
          <section class="fact">
            <h3 data-i18n="Learn more">Learn more</h3>
            <div class="links-col">
              <a class="btn-link" id="peakLnkWikipedia" href="https://en.wikipedia.org/wiki/" target="_blank" rel="noopener">Wikipedia</a>
              <a class="btn-link" id="peakLnkPeakbagger" href="https://www.peakbagger.com/" target="_blank" rel="noopener">Peakbagger</a>
              <a class="btn-link" id="peakLnkAllTrails" href="https://www.alltrails.com/" target="_blank" rel="noopener">AllTrails</a>
              <a class="btn-link" id="peakLnkSummitPost" href="https://www.summitpost.org/" target="_blank" rel="noopener">SummitPost</a>
              <a class="btn-link" id="peakLnkMaps" href="https://www.openstreetmap.org/" target="_blank" rel="noopener">OpenStreetMap</a>
            </div>
          </section>
        </div>
      </div>

      <!-- Table view (hidden by default) -->
      <table id="table-view" style="display:none">
        <thead>
          <tr>
            <th style="width:64px">Rank</th>
            <th>Mountain</th>
            <th style="width:140px">Elevation</th>
            <th style="width:160px">Date / Months</th>
            <th style="width:120px">Completed</th>
            <th style="width:48px"></th>
          </tr>
        </thead>
        <tbody id="rows"></tbody>
      </table>

      <!-- Pagination footer (Bottom) -->
      <div class="pager-wrap">
        <div class="pager-stats" id="pg-stats-bot">Showing ‚Äî</div>
        <div class="page-list"  id="pg-list-bot"  aria-label="Pagination (bottom)"></div>
      </div>
    </main>
  </div>

<!-- Auth Modal -->
<div class="modal" id="authModal" aria-hidden="true">
  <div class="sheet" role="dialog" aria-modal="true" aria-labelledby="authTitle">
    <h2 id="authTitle" data-i18n="Log in">Log in</h2>
    
    <!-- LOGIN FORM (default) -->
    <div id="loginForm">
      <div class="subtle" style="margin-bottom:16px" data-i18n="Log in to access your peak tracking data.">Log in to access your peak tracking data.</div>
      
      <div class="field"><label for="loginEmail" data-i18n="Email *">Email *</label><input id="loginEmail" type="email" placeholder="you@email.com" data-i18n-placeholder="you@email.com" autocomplete="email" required></div>
      <div class="field"><label for="loginPass" data-i18n="Password *">Password *</label><input id="loginPass" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" data-i18n-placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" autocomplete="current-password" required></div>
      
      <label style="display:flex;align-items:center;gap:8px;margin:12px 0">
        <input type="checkbox" id="rememberMe" checked />
        <span data-i18n="Stay signed in">Stay signed in</span>
      </label>
      
      <div class="row-actions" style="margin-top:16px">
        <button class="btn btn-primary" id="doLogin" data-i18n="Log in">Log in</button>
        <span class="space"></span>
        <button class="btn btn-ghost" id="closeAuth" data-i18n="Close">Close</button>
      </div>
      
      <div style="margin-top:16px;text-align:center">
        <span class="subtle" data-i18n="Don't have an account?">Don't have an account? </span>
        <a href="#" id="showSignup" style="color:#4a9eff;text-decoration:none" data-i18n="Create account">Create account</a>
      </div>
    </div>
    
    <!-- SIGN UP FORM (hidden by default) -->
    <div id="signupForm" style="display:none">
      <div class="subtle" style="margin-bottom:16px" data-i18n="Create your account to start tracking peaks.">Create your account to start tracking peaks.</div>
      
      <div class="field"><label for="signupFirstName" data-i18n="First Name *">First Name *</label><input id="signupFirstName" type="text" placeholder="John" data-i18n-placeholder="John" autocomplete="given-name" required></div>
      <div class="field"><label for="signupLastName" data-i18n="Last Name">Last Name</label><input id="signupLastName" type="text" placeholder="Doe" data-i18n-placeholder="Doe" autocomplete="family-name"></div>
      <div class="field"><label for="signupEmail" data-i18n="Email *">Email *</label><input id="signupEmail" type="email" placeholder="you@email.com" data-i18n-placeholder="you@email.com" autocomplete="email" required></div>
      <div class="field"><label for="signupPass" data-i18n="Password *">Password *</label><input id="signupPass" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" data-i18n-placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" autocomplete="new-password" required></div>
      <div class="field"><label for="signupPassConfirm" data-i18n="Confirm Password *">Confirm Password *</label><input id="signupPassConfirm" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" data-i18n-placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" autocomplete="new-password" required></div>
      
      <!-- Honeypot for bot prevention -->
      <div style="position:absolute;left:-9999px" aria-hidden="true">
        <input type="text" id="signupHoneypot" tabindex="-1" autocomplete="off" />
      </div>
      
      <div class="tos-toggle" id="tosToggle" style="margin-top:12px" data-i18n="üìÑ View Terms & Conditions">üìÑ View Terms & Conditions</div>
      <div class="tos-box" id="tosBox">
        <div id="tosText"></div>
      </div>
      <label class="tos-agree">
        <input type="checkbox" id="tosAgree" />
        <span data-i18n="I agree to the Terms & Conditions *">I agree to the Terms & Conditions *</span>
      </label>
      
      <div class="row-actions" style="margin-top:16px">
        <button class="btn btn-primary" id="doSignup" disabled data-i18n="Create account">Create account</button>
        <span class="space"></span>
        <button class="btn btn-ghost" id="closeAuth" data-i18n="Close">Close</button>
      </div>
      
      <div style="margin-top:16px;text-align:center">
        <span class="subtle">Already have an account? </span>
        <a href="#" id="showLogin" style="color:#4a9eff;text-decoration:none">Log in</a>
      </div>
    </div>
    
    <div id="authMsg" class="note" style="margin-top:12px"></div>
  </div>
</div>

<!-- XLSX lib -->
<script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>

<!-- Supabase client -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<!-- Settings labels sync (capitalized) -->
<script>
document.addEventListener('DOMContentLoaded',()=>{
  const metersToggle=document.getElementById('metersToggle');
  const themeSelect = document.getElementById('themeSelect');
  const metersLabel=metersToggle.closest('.row').querySelector('label');
  const updMeters=()=>{metersLabel.textContent='Units: '+(metersToggle.checked?'Meters':'Feet')};
  updMeters();
  metersToggle.addEventListener('change',updMeters);
  // sync theme select default from prefs if present
  try{ const prefs = JSON.parse(localStorage.getItem('pb_prefs_v1')||'{}'); if (themeSelect && prefs.theme) themeSelect.value = prefs.theme; }catch(e){}
});
</script>

<!-- URL masking: show clean URL without /pages/ subfolder -->
<script>
(function() {
  // If we're on /pages/peakbagger-clean.html, always show clean URL /
  if (window.location.pathname.includes('/pages/peakbagger-clean.html') || 
      window.location.pathname.includes('peakbagger-clean')) {
    // Clear any stored redirect path - home page is always just /
    sessionStorage.removeItem('redirect_path');
    // Always use clean root URL for home page
    window.history.replaceState({}, document.title, '/');
  }
})();
</script>

<!-- App Module -->
<script type="module" src="../app.js"></script>

<!-- Reset helper (unchanged + grid key) -->
<button id="pbReset" style="border:1px solid #ff8a8a;border-radius:8px;padding:8px 10px;background:#1a1a1a;color:#fff;cursor:pointer">
  Reset all local data
</button>
<script>
  (function(){
    const KEYS_PREFIX = ['peakbagger_web_state_v3_', 'peakbagger_web_grid_v1_', 'pb_'];
    document.getElementById('pbReset')?.addEventListener('click', () => {
      if (!confirm('This will erase your saved progress, dates, sign-in, and preferences on this device. Continue?')) return;
      try {
        const toDelete = [];
        for (let i = 0; i < localStorage.length; i++) {
          const k = localStorage.key(i);
          if (k && KEYS_PREFIX.some(p => k.startsWith(p))) toDelete.push(k);
        }
        toDelete.forEach(k => localStorage.removeItem(k));
        ['pb_users_v1','pb_session_v1','pb_prefs_v1'].forEach(k => localStorage.removeItem(k));
        alert('All Peakbagger data on this device has been cleared.');
        location.reload();
      } catch (e) {
        alert('Could not clear local data. You can manually clear site data in your browser settings.');
      }
    });
  })();
</script>

<!-- Auto-collapse details on mobile (NEW) -->
<script>
  document.addEventListener('DOMContentLoaded', () => {
    const settingsEl = document.getElementById('settingsDetails');
    const resourcesEl = document.getElementById('resourcesDetails');
    function toggleDetailsByWidth() {
      const isMobile = window.innerWidth < 960;
      if (settingsEl) {
        if (isMobile) settingsEl.removeAttribute('open'); else settingsEl.setAttribute('open', '');
      }
      if (resourcesEl) {
        if (isMobile) resourcesEl.removeAttribute('open'); else resourcesEl.setAttribute('open', '');
      }
    }
    toggleDetailsByWidth();
    window.addEventListener('resize', toggleDetailsByWidth);
  });
</script>

<!-- Noscript notice -->
<noscript>
  <div style="margin:12px; padding:12px; border:1px solid #e6a100; border-radius:8px; background:#2a2000; color:#ffd87a">
    Peakbagger's Journal needs JavaScript for list loading and saving progress. Please enable JavaScript to use the app.
  </div>
</noscript>

<!-- Version badge -->
<div class="app-version" aria-hidden="true">v0.8.0.1</div>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-app.js";
  import { getAnalytics, logEvent } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-analytics.js";

  const firebaseConfig = {
    apiKey: "AIzaSyBOoVfsHNCBoMbJs3qPVtww8rizKSZ84uo",
    authDomain: "nh48-app.firebaseapp.com",
    projectId: "nh48-app",
    storageBucket: "nh48-app.firebasestorage.app",
    messagingSenderId: "287695607808",
    appId: "1:287695607808:web:a45dc3bc0f5096b22560e5",
    measurementId: "G-T3QTRLC22T"
  };

  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);

  // Expose globally so your existing JS can use it
  window.NH48_ANALYTICS = {
    analytics,
    logEvent
  };

  // First event to confirm wiring works
  logEvent(analytics, "app_loaded", {
    app: "peakbagger",
    host: location.hostname
  });
</script>

</body>
</html>
